# rewrite_tag_filter Output Plugin

The `out_rewrite_tag_filter` Output plugin has designed to rewrite tag like mod_rewrite. Re-emmit a record with rewrited tag when a value matches/unmatches with the regular expression.  Also you can change a tag from apache log by domain, status-code(ex. 500 error), user-agent, request-uri, regex-backreference and so on with regular expression. 

## Install

`out_rewrite_tag_filter` is included in td-agent by default (v1.1.18 or later). Fluentd gem users will have to install the fluent-plugin-rewrite-tag-filter gem using the following command.

    :::term
    $ fluent-gem install fluent-plugin-rewrite-tag-filter

## Example Configuration

    :::text
    <match apache.access>
      type rewrite_tag_filter
      capitalize_regex_backreference yes
      rewriterule1 path   \.(gif|jpe?g|png|pdf|zip)$  clear
      rewriterule2 status !^200$                      clear
      rewriterule3 domain !^.+\.com$                  clear
      rewriterule4 domain ^maps\.example\.com$        site.ExampleMaps
      rewriterule5 domain ^news\.example\.com$        site.ExampleNews
      rewriterule6 domain ^(mail)\.(example)\.com$    site.$2$1
      rewriterule7 domain .+                          site.unmatched
    </match>

    <match clear>
      type null
    </match>

NOTE: Please see the <a href="https://github.com/fluent/fluent-plugin-rewrite-tag-filter">README.md</a> for further details.
