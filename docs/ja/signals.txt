# シグナル処理

この記事では `Fluentd` におけるUNIXシグナルの処理方法を説明します。

## プロセスモデル

Fluentdを起動すると、supervisorとworkerの2つのプロセスが生成されます。supervisorプロセスはworkerプロセスのライフスタイルを制御します。supervisorプロセスに任意のシグナルが送信されることを確認してください。

## シグナル一覧

### SIGINT または SIGTERM

デーモンを正しく停止します。Fluentdはメモリバッファ全体をフラッシュしようとしますが、フラッシュが失敗した場合は再試行しません。Fluentdのデフォルトではログはディスク上に保存され、ファイルバッファはフラッシュされません。

### SIGUSR1

バッファリングされたメッセージを強制的にフラッシュし、Fluentdのログを再オープンします。先頭のバッファ(メモリおよびファイルを含む)を即座にフラッシュし、以降は `flush_interval` 毎にバッファをフラッシュします。

### SIGHUP

workerプロセスを正しく再起動することで設定ファイルを再読み込みします。Fluentdはメモリバッファ全体をフラッシュしようとしますが、フラッシュが失敗した場合は再試行しません。Fluentdのデフォルトではログはディスク上に保存され、ファイルバッファはフラッシュされません。
