# in_scribe Input Plugin

The `in_scribe` input plugin enables Fluentd to retrieve records through Scribe protocol. [Scribe](https://github.com/facebook/scribe) is another log collector daemon which is open-sourced by Facebook.

Actually, Scribe isn't maintained well recently, so this plugin is useful for existing Scribe users to work Fluentd with existing Scribe infrastructure.

### Install

td-agent includes Scribe plugin by default. For Fluentd gem users, you need to install fluent-plugin-scribe gem by the following command.

    :::term
    $ fluent-gem install fluent-plugin-scribe

### Example Config

    :::text
    <source>
      type scribe
      port 1463

      bind 0.0.0.0
      msg_format json
    </source>

NOTE: See <a href="config-file">Config File</a> for the basic structure and syntax of the configuration file.

#### Example Usage

Assume you've already know Scribe protocol. This [Python example code](https://github.com/fluent/fluent-plugin-scribe/blob/master/bin/fluent-scribe-remote) posts the logs to `in_scribe`.

Scribe's `category` field is regarded as `tag` at Fluentd, and Scribe's `message` field is used for the record. You can choose the format of `message` field by `msg_format` parameter.

### Parameters

#### type (required)
The value must be `scribe`.

#### port
The port to listen on. Default Value = 1463.

#### bind
The bind address to listen on. Default Value = 0.0.0.0 (all addresses)

#### msg_format

format of the messages either in ‘text’, ‘json’, ‘url_param’ (default: text)

For `json`, Fluentd's record is organized as follows. Scribe's message field must contain valid JSON string representing Hash. If message contains invalid JSON format, it's ignored.

    tag: $category
    record: $message

For `url_param`, Fluentd's record is organized as follows. Scribe's message field must contain URL parameter style key-value pairs with url encoding (e.g. key1=val1&key2=val2).

    tag: $url_param
    record: {$key1: $val1, $key2: $val2, ...}

For `text`, Fluentd's record is organized as follows. Scribe's message can be any arbitrary string but using JSON is recommended for later analytics pipeline.

    tag: $category
    record: {'message': $message}

#### is_framed
Use Thrift's framed protocol or not (default: true)

#### server_type
Choose the server architecture. Either in ‘simple’, ‘threaded’, ‘thread_pool’, ‘nonblocking’ (default: nonblocking)

####  add_prefix
prefix string, always added to the tag (default: nil)
